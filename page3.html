<!DOCTYPE html>
<html>
<head>
    <!-- Site made with Mobirise Website Builder v5.6.5, https://mobirise.com -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="Mobirise v5.6.5, mobirise.com">
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image:src" content="">
    <meta property="og:image" content="">
    <meta name="twitter:title" content="全台領養動物查詢">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <link rel="shortcut icon" href="assets/images/logo-63x50.png" type="image/x-icon">
    <meta name="description" content="">
    <title>全台領養動物查詢</title>
    <link rel="stylesheet" href="assets/web/assets/mobirise-icons2/mobirise2.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="assets/animatecss/animate.css">
    <link rel="stylesheet" href="assets/dropdown/css/style.css">
    <link rel="stylesheet" href="assets/socicon/css/styles.css">
    <link rel="stylesheet" href="assets/theme/css/style.css">
    <link rel="preload"
          href="https://fonts.googleapis.com/css?family=Jost:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&display=swap"
          as="style" onload="this.onload=null;this.rel='stylesheet'"
    >
    <noscript>
        <link rel="stylesheet"
              href="https://fonts.googleapis.com/css?family=Jost:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&display=swap"
        >
    </noscript>
    <link rel="preload"
          href="https://fonts.googleapis.com/css?family=Cairo:200,300,400,500,600,700,800,900&display=swap"
          as="style" onload="this.onload=null;this.rel='stylesheet'"
    >
    <noscript>
        <link rel="stylesheet"
              href="https://fonts.googleapis.com/css?family=Cairo:200,300,400,500,600,700,800,900&display=swap"
        >
    </noscript>
    <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css">
    <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
    <style>
        .loader {
            border: 5px solid #f3f3f3; /* Light grey */
            border-top: 5px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            margin: 10px auto;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .text-overflow-row-3 {
            display: -webkit-box;
            max-width: 400px;
            height: 3em;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1em;
        }

        ul.list {
            list-style: none;
            padding: 0px !important;
            width: 100%;
        }

        ul.list li {
            padding: 0px !important;
            margin: 5px 10px;
            border: 5px solid lightgrey;
            border-top: #f4bfbf solid 5px;
            border-bottom: #f4bfbf solid 5px;
            min-width: 300px;
        }

        ul.list li:hover, .main ul.list li.active {
            border-left: #f4bfbf solid 5px;
            border-right: #f4bfbf solid 5px;
        }

        ul.list li dl dt:before {
            color: #f4bfbf;
        }

        ul.list li h5 {
            background-color: #f4bfbf;
            margin: -5px -5px 10px -5px;
            text-align: center;
            padding: 10px !important;
        }

    </style>

</head>
<body>
<section data-bs-version="5.1" class="menu cid-s48OLK6784" once="menu" id="menu1-h">

    <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
        <div class="container-fluid">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="https://mobiri.se">
                        <img src="assets/images/logo-63x50.png" alt="Mobirise Website Builder" style="height: 3.8rem;">
                    </a>
                </span>
                <span class="navbar-caption-wrap"><a class="navbar-caption text-black text-primary display-7"
                                                     href="index.html#top">桃園市動物認養</a></span>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse"
                    data-target="#navbarSupportedContent" data-bs-target="#navbarSupportedContent"
                    aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true">
                    <li class="nav-item"><a class="nav-link link text-black show text-primary display-4"
                                            href="index.html#features21-26"><span
                            class="mobi-mbri mobi-mbri-paper-plane mbr-iconfont mbr-iconfont-btn"
                            style="font-size: 20px;"><strong>領養流程</strong></span></a></li>
                    <li class="nav-item dropdown"><a class="nav-link link text-black dropdown-toggle display-4"
                                                     href="index.html#features3-21" data-toggle="dropdown-submenu"
                                                     data-bs-toggle="dropdown" data-bs-auto-close="outside"
                                                     aria-expanded="false"><span
                            class="mobi-mbri mobi-mbri-github mbr-iconfont mbr-iconfont-btn"
                            style="font-size: 20px;"><strong>領養小動物</strong></span></a>
                        <div class="dropdown-menu" aria-labelledby="dropdown-982"><a
                                class="text-black dropdown-item show text-primary display-4"
                                href="https://taw.tycg.gov.tw/" aria-expanded="false">貓咪</a><a
                                class="text-black dropdown-item text-primary display-4"
                                href="https://asms.coa.gov.tw/Amlapp/App/AnnounceMent.aspx?PageType=Adopt&Unit=CAAAG&AnimalType=1">狗狗<br></a><a
                                class="text-black dropdown-item text-primary display-4"
                                href="https://wepet.tw/%E5%AF%B5%E7%89%A9%E9%A0%98%E9%A4%8A">兔子</a><a
                                class="text-black show dropdown-item text-primary display-4"
                                href="https://wepet.tw/%E5%AF%B5%E7%89%A9%E9%A0%98%E9%A4%8A">老鼠</a></div>
                    </li>
                    <li class="nav-item"><a class="nav-link link text-black text-primary show display-4"
                                            href="index.html#content17-25" aria-expanded="false"><span
                            class="mobi-mbri mobi-mbri-search mbr-iconfont mbr-iconfont-btn"
                            style="font-size: 20px;"><strong>領養Q&amp;A</strong></span></a></li>
                    <li class="nav-item dropdown"><a
                            class="nav-link link text-black text-primary dropdown-toggle show display-4"
                            href="index.html#content17-25" data-toggle="dropdown-submenu" data-bs-toggle="dropdown"
                            data-bs-auto-close="outside" aria-expanded="false"><span
                            class="mobi-mbri mobi-mbri-phone mbr-iconfont mbr-iconfont-btn"
                            style="font-size: 20px;"><strong>關於我們</strong></span></a>
                        <div class="dropdown-menu show" aria-labelledby="dropdown-906" data-bs-popper="none"><a
                                class="text-black text-primary show dropdown-item display-4"
                                href="https://taw.tycg.gov.tw/Sitemap.aspx">桃園動物保護區</a><a
                                class="text-black text-primary show dropdown-item display-4"
                                href="page3.html">全台領養動物搜索</a></div>
                    </li>
                </ul>

            </div>
        </div>
    </nav>

</section>

<section data-bs-version="5.1" class="header1 cid-t7XHghC8ON" id="header1-2i" style="min-height: calc(100vh - 160px);">
    <div class="container main">
        <div class="master mt-4">
            <div id="QueryData">
                <h2 class="mb-3"><span>請輸入查詢條件</span></h2>
                <div class="row flex-column flex-sm-row">
                    <div class="col d-flex justify-content-center align-items-center py-3" style="min-width: 200px">
                        <div class="form-check d-inline-block mx-2">
                            <input class="form-check-input" type="radio" name="rdlAnimalType" value="狗" id="Dog"
                                   checked>
                            <label class="form-check-label" for="Dog">
                                狗
                            </label>
                        </div>
                        <div class="form-check d-inline-block mx-2">
                            <input class="form-check-input" type="radio" name="rdlAnimalType" value="貓" id="Cat">
                            <label class="form-check-label" for="Cat">
                                貓
                            </label>
                        </div>
                        <div class="form-check d-inline-block mx-2">
                            <input class="form-check-input" type="radio" name="rdlAnimalType" value="其他" id="Other">
                            <label class="form-check-label" for="Other">
                                其他
                            </label>
                        </div>
                    </div>
                    <div class="col flex-grow-1 d-block d-sm-inline-flex align-items-center" style="min-width: 350px">
                        <label class="form-control-label text-nowrap mx-2">收容所</label>
                        <select id="ddlShelter" class="form-control"></select>
                    </div>
                    <div class="col d-flex justify-content-center align-items-center" style="min-width: 350px">
                        <div class="queryOption">
                            <button id="Cancel" type="button" class="btn btn-lg btn-secondary"><span>取消</span></button>
                            <button id="Search" type="button" class="btn btn-lg btn-warning"><span>查詢</span></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col flex-grow-1">
                <div id="PetContent" style="flex-grow: 1"></div>
            </div>
            <div class="col flex-grow-0 text-center" style="width: 350px;">
                <h2><span>&nbsp;</span></h2>
                <iframe id="map" frameborder="0" style="width: 350px; height: 350px"
                        src="https://www.google.com/maps/embed/v1/place?key=AIzaSyCZI5F_k6S1k46ujh0SNrapM89f7mJxd30&amp;q=350 5th Ave, New York, NY 10118"
                        allowfullscreen=""
                ></iframe>
            </div>
        </div>
    </div>
</section>
<section data-bs-version="5.1" class="footer7 cid-t7XHgnIzh3" once="footers" id="footer7-2m">
    <div class="container">
        <div class="media-container-row align-center mbr-white">
            <div class="col-12">
                <p class="mbr-text mb-0 mbr-fonts-style display-7">
                    © Copyright 2025 Mobirise - All Rights Reserved
                </p>
            </div>
        </div>
    </div>
</section>
<section class="display-7"
         style="padding: 0;align-items: center;justify-content: center;flex-wrap: wrap;    align-content: center;display: flex;position: relative;height: 4rem;"
>
    <a href="https://mobiri.se/2753073" style="flex: 1 1;height: 4rem;position: absolute;width: 100%;z-index: 1;">
        <img alt="" style="height: 4rem;"
             src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="
        ></a>
    <p style="margin: 0;text-align: center;" class="display-7">Created with Mobirise &#8204;</p>
    <a style="z-index:1" href="https://mobirise.com/website-design-software.html">Web Design Software</a>
</section>
<script language="javascript" type="text/javascript"
        src="https://asms.coa.gov.tw/AmlApp/_Script/ENRF/App/jquery.1.11.1.js"
></script>
<script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/smoothscroll/smooth-scroll.js"></script>
<script src="assets/ytplayer/index.js"></script>
<script src="assets/dropdown/js/navbar-dropdown.js"></script>
<script src="assets/theme/js/script.js"></script>
<input name="animation" type="hidden">

<script>
    (async function () {

        $('#map').hide();

        $('#ddlShelter').html('<option value="">- 收容所 -</option>');
        const shelter = await $.get('https://asms.coa.gov.tw/Asms/api/Shelter').then(res => res);
        if (shelter && shelter.length) {
            shelter.forEach(s => {
                $('#ddlShelter').append('<option value="' + s.STANAME + '">' + s.STANAME + '</option>');
            });
        }

        $('#Search').bind('click', async function () {
            $('#PetContent').html('<div class="loader"></div>');

            let param = '';
            if ($('[name="rdlAnimalType"]:checked')) {
                param += '&animal_kind=' + $('[name="rdlAnimalType"]:checked').val();
            }

            if ($('#ddlShelter').val()) {
                param += '&animal_place=' + $('#ddlShelter').val();
            }

            //const data = await $.get('http://127.0.0.1:1880/getAnimals?' + param).then(res => res);

            const data = await $.get('https://data.coa.gov.tw/Service/OpenData/TransService.aspx?UnitId=QcbUEzN6E6DL' + param).then(res => res);

            if (data && data.length) {
                $('#map').show();
                $('#PetContent').html('<h3><span id="spanTitle">動物認領養</span></h3>');
                $('#PetContent').append(' <ul id="Annoce" class="list row"></ul>');
                $('#PetContent').append(' <nav aria-label="Page navigation example"><ul class="pagination"></ul></nav>');
                let page = 1;
                let total = Math.ceil(data.length / 6);

                function generateAnimal() {
                    $('#PetContent nav>ul').html('');
                    const prev = $(`<li class="page-item"><a class="page-link" aria-label="Previous"> <span aria-hidden="true">&laquo;</span></a>`);
                    const next = $(`<li class="page-item"><a class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></li>`);
                    prev.bind('click', function () {
                        page = 1;
                        generateAnimal();
                    });
                    next.bind('click', function () {
                        page = total;
                        generateAnimal();
                    });
                    $('#PetContent nav>ul').append(prev);
                    for (let i = page - 2; i <= page + 2; i++) {

                        if (i > 0 && i <= total) {
                            const pageEle = $(`<li class="page-item ${i === page ? 'active' : ''}"><a class="page-link">${i}</a></li>`);
                            pageEle.bind('click', function () {
                                page = i;
                                generateAnimal();
                            });
                            $('#PetContent nav>ul').append(pageEle);
                        }
                    }
                    $('#PetContent nav>ul').append(next);

                    $('#PetContent #Annoce').html('');
                    data.slice((page - 1) * 6, (page) * 6).forEach((pet, index) => {
                        const liElement = $(`<li id="${index}" class="col-sm-12 col-md-6 col-lg-4">
                                              <h5><span>${(page - 1) * 6 + index + 1}</span></h5>
                                              <div class="d-block d-sm-inline-flex px-2 w-100 mx-1">
                                                <div style="width: 5em;min-width: 5em">類別：</div><div>${pet.animal_kind}</div>
                                              </div>
                                              <div class="d-block d-sm-inline-flex px-2 w-100  mx-1">
                                                <div style="width: 5em;min-width: 5em">性別：</div><div>${pet.animal_sex}</div>
                                               </div>
                                              <div class="d-block d-sm-inline-flex px-2 w-100 mx-1">
                                                  <div style="width: 5em;min-width: 5em">來源：</div><div class="text-overflow-row-3">${pet.shelter_address}</div>
                                              </div>
                                              <div class="d-block d-sm-inline-flex px-2 w-100 mx-1">
                                                <div style="width: 5em;min-width: 5em">我在　</div><div class="text-overflow-row-3">${pet.shelter_name}</div>
                                              </div>
                                            </li>`);

                        liElement.bind('click', function (e) {
                            if ($('#PetContent #Annoce li.active')) {
                                $('#PetContent #Annoce li.active').removeClass('active');
                            }
                            liElement.addClass('active');
                            document.getElementById('map').setAttribute('src', 'https://www.google.com/maps/embed/v1/place?key=AIzaSyCZI5F_k6S1k46ujh0SNrapM89f7mJxd30&q=' + pet.shelter_address);
                        });
                        $('#PetContent #Annoce').append(liElement);
                    });
                }

                generateAnimal();
                $('#PetContent #Annoce li')[0].click();

            } else {
                $('#PetContent').html('<h3 class="text-center">查無資料</h3>');
                $('#map').hide();
            }

        }).trigger('click');

        $('#Cancel').bind('click', function () {
            $('#PetContent').html('');
        });

    })();
</script>

</body>
</html>
